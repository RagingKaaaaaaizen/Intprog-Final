{"ast":null,"code":"import { first } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../_services\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = a0 => ({\n  token: a0\n});\nfunction EmailPreviewComponent_span_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 18);\n  }\n}\nexport let EmailPreviewComponent = /*#__PURE__*/(() => {\n  class EmailPreviewComponent {\n    constructor(route, router, accountService, alertService) {\n      this.route = route;\n      this.router = router;\n      this.accountService = accountService;\n      this.alertService = alertService;\n      this.loading = false;\n      this.verificationToken = '';\n      this.etherealUrl = '';\n      this.email = '';\n    }\n    ngOnInit() {\n      // Get parameters from route\n      this.route.queryParams.subscribe(params => {\n        this.verificationToken = params['token'] || '';\n        this.etherealUrl = params['etherealUrl'] || '';\n        this.email = params['email'] || '';\n        if (!this.verificationToken || !this.etherealUrl) {\n          this.alertService.error('Missing verification information. Please go back and register again.');\n        }\n      });\n    }\n    verifyNow() {\n      this.loading = true;\n      this.accountService.verifyEmail(this.verificationToken).pipe(first()).subscribe({\n        next: () => {\n          this.alertService.success('Email verified successfully! You can now login.', {\n            keepAfterRouteChange: true\n          });\n          this.router.navigate(['/account/login']);\n        },\n        error: error => {\n          this.alertService.error(error);\n          this.loading = false;\n        }\n      });\n    }\n    openEtherealMail() {\n      window.open(this.etherealUrl, '_blank');\n    }\n    static #_ = this.ɵfac = function EmailPreviewComponent_Factory(t) {\n      return new (t || EmailPreviewComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AccountService), i0.ɵɵdirectiveInject(i2.AlertService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: EmailPreviewComponent,\n      selectors: [[\"ng-component\"]],\n      decls: 54,\n      vars: 7,\n      consts: [[1, \"card\"], [1, \"card-header\"], [1, \"card-body\"], [1, \"alert\", \"alert-info\"], [1, \"email-preview-container\", \"p-3\", \"border\", \"rounded\", \"mb-4\"], [1, \"email-preview-header\", \"bg-light\", \"p-2\", \"mb-3\", \"border-bottom\"], [1, \"email-preview-body\", \"p-2\"], [1, \"mb-3\", \"mt-3\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [\"class\", \"spinner-border spinner-border-sm mr-1\", 4, \"ngIf\"], [1, \"small\", \"text-muted\"], [1, \"card\", \"bg-light\", \"mb-4\"], [1, \"card-title\"], [1, \"btn\", \"btn-info\", 3, \"click\"], [1, \"fa\", \"fa-external-link\"], [1, \"form-group\"], [\"routerLink\", \"/account/verify-email\", 1, \"btn\", \"btn-outline-primary\", \"mr-2\", 3, \"queryParams\"], [\"routerLink\", \"/account/login\", 1, \"btn\", \"btn-link\"], [1, \"spinner-border\", \"spinner-border-sm\", \"mr-1\"]],\n      template: function EmailPreviewComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h4\", 1);\n          i0.ɵɵtext(2, \"Email Verification Preview\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3)(5, \"h5\");\n          i0.ɵɵtext(6, \"Your account has been registered!\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"p\");\n          i0.ɵɵtext(8, \"In a real-world scenario, we would send an email to: \");\n          i0.ɵɵelementStart(9, \"strong\");\n          i0.ɵɵtext(10);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(11, \"p\");\n          i0.ɵɵtext(12, \"Since this application is in test mode using Ethereal Mail, we've created a verification email preview for you.\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(13, \"div\", 4)(14, \"div\", 5)(15, \"div\")(16, \"strong\");\n          i0.ɵɵtext(17, \"From:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(18, \" Employee Management System <noreply@employee-system.com>\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"div\")(20, \"strong\");\n          i0.ɵɵtext(21, \"To:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(22);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(23, \"div\")(24, \"strong\");\n          i0.ɵɵtext(25, \"Subject:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(26, \" Sign-up Verification - Verify Email\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(27, \"div\", 6)(28, \"h4\");\n          i0.ɵɵtext(29, \"Verify Email\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(30, \"p\");\n          i0.ɵɵtext(31, \"Thanks for registering!\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(32, \"p\");\n          i0.ɵɵtext(33, \"Please click the below link to verify your email address:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(34, \"div\", 7)(35, \"a\", 8);\n          i0.ɵɵlistener(\"click\", function EmailPreviewComponent_Template_a_click_35_listener() {\n            return ctx.verifyNow();\n          });\n          i0.ɵɵtemplate(36, EmailPreviewComponent_span_36_Template, 1, 0, \"span\", 9);\n          i0.ɵɵtext(37, \" Verify My Email Now \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(38, \"p\", 10);\n          i0.ɵɵtext(39);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(40, \"div\", 11)(41, \"div\", 2)(42, \"h5\", 12);\n          i0.ɵɵtext(43, \"View Complete Email in Ethereal\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(44, \"p\");\n          i0.ɵɵtext(45, \"You can view the complete email in Ethereal's test inbox:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(46, \"button\", 13);\n          i0.ɵɵlistener(\"click\", function EmailPreviewComponent_Template_button_click_46_listener() {\n            return ctx.openEtherealMail();\n          });\n          i0.ɵɵelement(47, \"i\", 14);\n          i0.ɵɵtext(48, \" Open in Ethereal Mail \");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(49, \"div\", 15)(50, \"a\", 16);\n          i0.ɵɵtext(51, \"Go to Manual Verification\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(52, \"a\", 17);\n          i0.ɵɵtext(53, \"Return to Login\");\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(10);\n          i0.ɵɵtextInterpolate(ctx.email);\n          i0.ɵɵadvance(12);\n          i0.ɵɵtextInterpolate1(\" \", ctx.email, \"\");\n          i0.ɵɵadvance(14);\n          i0.ɵɵproperty(\"ngIf\", ctx.loading);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate1(\"Verification token: \", ctx.verificationToken, \"\");\n          i0.ɵɵadvance(11);\n          i0.ɵɵproperty(\"queryParams\", i0.ɵɵpureFunction1(5, _c0, ctx.verificationToken));\n        }\n      },\n      dependencies: [i3.NgIf, i1.RouterLink],\n      encapsulation: 2\n    });\n  }\n  return EmailPreviewComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}