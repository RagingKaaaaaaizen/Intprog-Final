{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { first } from 'rxjs/operators';\nlet EmailPreviewComponent = class EmailPreviewComponent {\n  constructor(route, router, accountService, alertService) {\n    this.route = route;\n    this.router = router;\n    this.accountService = accountService;\n    this.alertService = alertService;\n    this.loading = false;\n    this.verificationToken = '';\n    this.etherealUrl = '';\n    this.email = '';\n  }\n  ngOnInit() {\n    // Get parameters from route\n    this.route.queryParams.subscribe(params => {\n      this.verificationToken = params['token'] || '';\n      this.etherealUrl = params['etherealUrl'] || '';\n      this.email = params['email'] || '';\n      if (!this.verificationToken || !this.etherealUrl) {\n        this.alertService.error('Missing verification information. Please go back and register again.');\n      }\n    });\n  }\n  verifyNow() {\n    this.loading = true;\n    this.accountService.verifyEmail(this.verificationToken).pipe(first()).subscribe({\n      next: () => {\n        this.alertService.success('Email verified successfully! You can now login.', {\n          keepAfterRouteChange: true\n        });\n        this.router.navigate(['/account/login']);\n      },\n      error: error => {\n        this.alertService.error(error);\n        this.loading = false;\n      }\n    });\n  }\n  openEtherealMail() {\n    window.open(this.etherealUrl, '_blank');\n  }\n};\nEmailPreviewComponent = __decorate([Component({\n  templateUrl: 'email-preview.component.html'\n})], EmailPreviewComponent);\nexport { EmailPreviewComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}